name: 自动执行go mod tidy
on:
  workflow_dispatch:  # 手动触发（也可加push触发）

jobs:
  tidy:
    runs-on: ubuntu-latest
    steps:
      - name: 克隆仓库
        uses: actions/checkout@v4
        
      - name: 安装Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.21'  # 替换为你的项目Go版本
          
      - name: 执行go mod tidy
        run: go mod tidy
        
      - name: 提交并推送修改
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Auto: go mod tidy"
          file_pattern: "go.mod go.sum"  # 只提交这两个文件
